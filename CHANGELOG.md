# 3Things 更新日志

## v1.0.0 - 2025-01-14

### ✨ 核心功能升级

1. **跨设备云同步**
   - 使用 Chrome Storage Sync API 实现自动云同步
   - 数据在所有登录相同 Google 账号的 Chrome 设备间自动同步
   - 支持离线使用，数据本地持久化存储
   - 100KB 同步配额，足够存储长期任务记录

2. **多语言支持 (i18n)**
   - 支持中文和英文双语
   - 自动跟随浏览器语言设置
   - 使用 Chrome Extension 标准 i18n 系统
   - 完整的开发环境 fallback 机制

### 🔧 技术改进

3. **存储架构重构**
   - 从 localStorage 迁移到 chrome.storage.sync
   - 所有存储操作改为异步 (async/await)
   - 开发环境自动降级到 localStorage
   - 增强的错误处理和数据验证

4. **国际化实现**
   - 创建 `_locales/zh/messages.json` 和 `_locales/en/messages.json`
   - 更新 manifest.json 使用 `__MSG__` 占位符
   - 创建 `src/lib/i18n.ts` 工具函数
   - 所有组件迁移到使用 `t()` 翻译函数

### 📝 文档更新

5. **Chrome Web Store 准备**
   - 创建 `PERMISSION_EXPLANATION.md` - 详细的存储权限说明（中英双语）
   - 更新 `PRIVACY.md` - 反映云同步功能
   - 提供商店审核所需的所有权限说明

### 🛠️ 开发体验

6. **代码质量**
   - 完整的 TypeScript 类型支持
   - 异步操作的 Promise 封装
   - 开发环境的中文 fallback
   - 增强的错误日志

---

## v0.9.0 - 2025-01-08

### ✨ UI/UX 优化

1. **字号调整**
   - 事项内容字号从默认增加到 `text-base` (16px)，更易阅读
   - "第X件事" 标签字号缩小到 `text-[10px]`，更加精致
   - 输入框字号调整为 `text-lg` (18px)，提升输入体验

2. **垂直对齐修复**
   - 底部语录图标与文字现在完美垂直居中对齐
   - 使用 `items-center` 替代 `items-start`
   - 移除图标的 `mt-0.5` 偏移

3. **空状态优化**
   - 增大空状态图标尺寸 (w-20 → w-24)
   - 添加副标题 "每天专注三件重要的事"
   - 优化动画时序，更流畅的过渡效果

### 🔧 核心功能修复

4. **午夜自动更新**
   - 修复日期计算逻辑，使用本地时区而非 UTC
   - 添加页面可见性检测，切换标签页时自动检查日期
   - 每 60 秒自动检查日期变化
   - 确保午夜 0 点后自动重置为新的一天

5. **数据持久化增强**
   - 添加数据损坏自动修复机制
   - 首次使用自动初始化空数据结构
   - 改进历史记录加载逻辑，确保数据同步

### 📦 技术改进

6. **代码优化**
   - 将日期计算改为使用本地时区 (YYYY-MM-DD 格式)
   - 添加 `loadData()` 函数统一数据加载逻辑
   - 使用 `useEffect` 监听页面可见性变化
   - 同步更新 UI 文件夹和 extension 文件夹的组件

### 🎨 视觉效果

7. **整体体验提升**
   - 所有动画更流畅自然
   - 毛玻璃效果更加细腻
   - 阴影和渐变更符合设计规范
   - 响应式交互反馈更及时

---

## 安装说明

### 重新安装扩展

1. 打开 Chrome 扩展管理页面: `chrome://extensions/`
2. 卸载旧版本 (如果已安装)
3. 开启"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择文件夹: `d:\Code\3things\extension\dist`

### 开发预览

访问开发服务器: http://localhost:5176/newtab.html

修改代码后自动热更新，无需重新加载扩展。

---

## 使用说明

- 每天最多可以添加 **3 件重要的事**
- 点击复选框标记完成，会显示完成进度
- 点击垃圾桶图标删除事项
- 右上角"历史记录"可查看过去 30 天的数据
- **午夜 0 点后自动重置**，开始新的一天

---

## 技术栈

- **React 18** + TypeScript
- **Vite** 6.4.1
- **Tailwind CSS** 4.1.12 (使用 @tailwindcss/vite 插件)
- **Motion/Framer Motion** 12.23.24
- **Radix UI** 组件库
- **Chrome Extension Manifest V3**
- **chrome.storage.sync** 跨设备云同步
- **Chrome i18n API** 国际化支持

---

## 下一步计划

- [x] 支持多设备同步 (v1.0.0 已实现)
- [ ] 添加键盘快捷键支持
- [ ] 支持自定义主题色
- [ ] 添加数据导出功能
- [ ] 添加番茄钟计时功能
- [ ] Chrome Web Store 发布
